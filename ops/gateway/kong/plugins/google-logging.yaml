apiVersion: v1
kind: Secret
metadata:
  name: kong-google-logging-secret
  namespace: kong
stringData:
  google-logging-config: |
    # See https://github.com/SmartParkingTechnology/kong-google-logging-plugin
    # google_key refers to the service account created for this plugin to write log entries
    google_key:
      private_key: "________REPLACE________"
      client_email: ""kong-google-logging@voice-service-2-313121.iam.gserviceaccount.com""
      project_id: "voice-service-2-313121"
      token_uri: "https://oauth2.googleapis.com/token"
    resource:
        type: k8s_cluster
        labels:
          project_id: voice-service-2-313121
          location: us-central1
          cluster_name: staging
    retry_count: 2
    flush_timeout: 2
    batch_max_size: 200
type: Opaque
---
apiVersion: configuration.konghq.com/v1
kind: KongClusterPlugin
metadata:
  name: kong-google-logging
  namespace: kong
  annotations:
    kubernetes.io/ingress.class: kong
  labels:
    global: "true"
configFrom:
  secretKeyRef:
    namespace: kong
    name: kong-google-logging-secret
    key: google-logging-config
plugin: google-logging
